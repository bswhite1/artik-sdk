CMAKE_MINIMUM_REQUIRED	( VERSION 2.8 )
PROJECT			( artik-sdk-zigbee C CXX )

FIND_PACKAGE ( Zigbee )

SET ( LIB_ZIGBEE artik-sdk-zigbee CACHE INTERNAL "" FORCE )
SET ( ARTIK_ZIGBEE_INCLUDE_DIR ${LIB_INC}/zigbee CACHE INTERNAL "" FORCE )
SET ( ARTIK_ZIGBEE_LIBRARIES ${LIB_ZIGBEE} CACHE INTERNAL "" FORCE )

SET ( SRC_ZIGBEE			artik_zigbee.c
							cpp/artik_zigbee.cpp
)

INCLUDE_DIRECTORIES ( linux )

IF ( CMAKE_ZIGBEE_TYPE STREQUAL "DUMMY" )
SET ( PLAT_SRC_ZIGBEE dummy_zigbee.c )
ELSE()
SET ( PLAT_SRC_ZIGBEE linux/linux_zigbee.c )
ENDIF()

ADD_LIBRARY ( ${LIB_ZIGBEE} SHARED ${SRC_ZIGBEE} ${PLAT_SRC_ZIGBEE} )

TARGET_INCLUDE_DIRECTORIES ( ${LIB_ZIGBEE} PUBLIC
							 ${ARTIK_BASE_INCLUDE_DIR}
							 ${ARTIK_ZIGBEE_INCLUDE_DIR}
							 ${LIBZIGBEE_INCLUDE_DIR}
							 ${ARTIK_BASE_INCLUDE_DIR}/cpp
							 ${ARTIK_ZIGBEE_INCLUDE_DIR}/cpp
)

TARGET_LINK_LIBRARIES ( ${LIB_ZIGBEE}
						${LIB_BASE}
						${LIBZIGBEE_LIBRARIES}
)

MESSAGE("TEST XXX ${LIBZIGBEE_LIBRARIES}")

SET_TARGET_PROPERTIES ( ${LIB_ZIGBEE} PROPERTIES VERSION ${LIB_VERSION_MAJOR}.${LIB_VERSION_MINOR}.${LIB_VERSION_PATCH} SOVERSION ${LIB_VERSION_MAJOR} OUTPUT_NAME ${LIB_ZIGBEE} )

INSTALL ( TARGETS ${LIB_ZIGBEE} LIBRARY DESTINATION "${CMAKE_INSTALL_LIBDIR}"
	PERMISSIONS OWNER_WRITE OWNER_READ OWNER_EXECUTE GROUP_READ GROUP_EXECUTE WORLD_READ WORLD_EXECUTE )
FILE ( GLOB ZIGBEE_HEADERS "${LIB_INC}/zigbee/*.h" )
FILE ( GLOB ZIGBEE_HEADERS_CPP "${LIB_INC}/zigbee/cpp/*.hh" )
INSTALL ( FILES ${ZIGBEE_HEADERS} DESTINATION "${CMAKE_INSTALL_INCLUDEDIR}/artik/zigbee" )
INSTALL ( FILES ${ZIGBEE_HEADERS_CPP} DESTINATION "${CMAKE_INSTALL_INCLUDEDIR}/artik/zigbee/cpp" )
